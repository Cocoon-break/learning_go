### 关闭channel的原则

官方上并没有给定一个关闭原则，只提到不能给一个已经关闭的channel 发送数据或者去关闭一个已经关闭的channel。但是一般来说普遍遵循的原则是

1. 不在接收方去关闭channel
2. 不关闭一个有多个并发发送的channel

### 优雅的关闭channel

#### 一个发送者，N个接收者

根据关闭channel的原则，这个是最简单的，直接在发送者关闭即可。

#### N个发送者，一个接收者

这个情况比第一个复杂一些，根据关闭channel的原则`不关闭一个有多个并发发送的channel`。通过其他的思路，我们可以让接收者通知发送者停止发送数据。停止发送数据之后，就不会有goroutine去使用这个channel。我们知道如果一个channel不会再有goroutine使用，那么它最终会被GC回收。

#### M个发送者，N个接收者

这个是最复杂的情况，不能让任意一个接收者或者发送者关闭数据通道,通过技巧关闭